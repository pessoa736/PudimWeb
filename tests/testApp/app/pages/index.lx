-- Home Page
-- Route: /

local Div, H1, P, A = html.div, html.h1, html.p, html.a
local Button, Ul, Li = html.button, html.ul, html.li
local Span = html.span

-- Interactive counter component using client module
local Counter = component(function(props)
    local startValue = props.start or 0
    
    -- Client-side JavaScript generated from Lua
    local onClick = client.function_("counterBtn", function()
        client.let("count", client.call("parseInt", 
            client.get("document.getElementById('count').textContent")
        ))
        client.set("count", client.op("count", "+", 1))
        client.set("document.getElementById('count').textContent", "count")
    end)
    
    return <Div class="counter">
        <P>Contagem: <Span id="count">{tostring(startValue)}</Span></P>
        <Button id="counterBtn" onclick="counterBtn()">Incrementar</Button>
        {onClick}
    </Div>
end)

-- Page component
local Header, Section = html.header, html.section

return component(function(props)
    return <Div class="container">
        <Header class="hero">
            <H1>ğŸ® Bem-vindo ao PudimWeb!</H1>
            <P class="subtitle">
                Um framework web moderno para Lua, inspirado em React e Next.js
            </P>
        </Header>
        
        <Section class="features">
            <H1>âœ¨ Features</H1>
            <Ul>
                <Li>ğŸ“ File-based routing (como Next.js)</Li>
                <Li>ğŸ§© Componentes reutilizÃ¡veis</Li>
                <Li>ğŸ¨ Sintaxe XML com DaviLuaXML</Li>
                <Li>âš¡ Virtual DOM com tree diffing</Li>
                <Li>ğŸ”„ Reconciler para atualizaÃ§Ãµes eficientes</Li>
                <Li>ğŸŒ Client module para interatividade</Li>
            </Ul>
        </Section>
        
        <Section class="demo">
            <H1>ğŸ¯ Exemplo Interativo</H1>
            <Counter start={0}/>
        </Section>
        
        <Section class="links">
            <H1>ğŸ“š NavegaÃ§Ã£o</H1>
            <Div class="nav-links">
                <A href="/about" class="link">Sobre</A>
                <A href="/docs" class="link">DocumentaÃ§Ã£o</A>
                <A href="/api/hello" class="link">API Demo</A>
            </Div>
        </Section>
    </Div>
end)
